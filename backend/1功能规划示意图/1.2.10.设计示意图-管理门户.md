# 1.2.10 设计示意图 - 管理门户

## 功能描述

系统管理员控制台，管理用户、角色、组织、项目、权限配置等。支持多租户隔离和精细化权限控制。

## 页面结构

```
╔═══════════════════════════════════════════════════════════════════╗
║  管理门户                         [用户] [角色] [组织] [项目]     ║
╠═══════════════════════════════════════════════════════════════════╣
║                                                                   ║
║  用户管理                                      [+新建用户]        ║
║                                                                   ║
║  ┌───────────────────────────────────────────────────────────┐   ║
║  │ ID │ 用户名  │ 邮箱          │ 角色        │ 状态 │ 操作  │   ║
║  ├───────────────────────────────────────────────────────────┤   ║
║  │ 1  │ admin  │ admin@...     │ Admin       │ 启用 │ [编辑]│   ║
║  │ 2  │ user1  │ user1@...     │ Test Eng    │ 启用 │ [编辑]│   ║
║  │ 3  │ user2  │ user2@...     │ Viewer      │ 禁用 │ [编辑]│   ║
║  └───────────────────────────────────────────────────────────┘   ║
║                                                                   ║
║  角色权限配置                                                     ║
║                                                                   ║
║  ┌─────────────────────────────────────────────────────────┐     ║
║  │ 角色: Admin                                             │     ║
║  │                                                         │     ║
║  │ 权限:                                                   │     ║
║  │ [✓] VIEW_DASHBOARD      [✓] VIEW_CASES                 │     ║
║  │ [✓] EDIT_CASES          [✓] EXECUTE_TESTS              │     ║
║  │ [✓] VIEW_AUTOMATION     [✓] EDIT_AUTOMATION            │     ║
║  │ [✓] MANAGE_USERS        [✓] MANAGE_DATABASE            │     ║
║  │                                                         │     ║
║  │ [保存]                                                  │     ║
║  └─────────────────────────────────────────────────────────┘     ║
╚═══════════════════════════════════════════════════════════════════╝
```

## 交互流程

- 切换标签 → 管理不同资源（用户/角色/组织/项目）
- 点击"新建" → 创建新资源
- 点击"编辑" → 修改资源信息
- 配置角色权限 → 勾选权限 → 保存
- 组织/项目树形结构管理

## 数据字段

| 字段名 | 类型 | 校验规则 | 说明 |
|--------|------|----------|------|
| user.id | string | 唯一 | 用户ID |
| user.username | string | 必填，4-20字符 | 用户名 |
| user.email | string | 必填，有效邮箱 | 邮箱 |
| user.roleId | string | 必填 | 角色ID |
| user.status | enum | ACTIVE/INACTIVE | 状态 |
| role.permissions | array | - | 权限列表 |

## 权限说明

- 访问权限：管理员
- 权限要求：MANAGE_USERS、MANAGE_ROLES 权限

## 后端 API 依赖

- `GET /api/admin/users` - 获取用户列表
- `POST /api/admin/users` - 创建用户
- `PUT /api/admin/users/:id` - 更新用户
- `GET /api/admin/roles` - 获取角色列表
- `PUT /api/admin/roles/:id` - 更新角色权限

## 实现建议

- 使用表格组件展示用户列表
- 权限配置使用复选框组实现
- 实现批量操作功能
- 添加操作日志记录

## 测试要点

- [ ] 用户列表正确显示
- [ ] 创建用户成功
- [ ] 编辑用户信息成功
- [ ] 角色权限配置正确保存
- [ ] 权限控制生效
- [ ] 多租户隔离正确

### 子功能 1: 用户编辑表单

```
       ╔═══════════════════════════════════════╗
       ║  编辑用户                      [×]    ║
       ╠═══════════════════════════════════════╣
       ║                                       ║
       ║  用户名: [admin__________________]    ║
       ║  validation: 必填，4-20字符            ║
       ║                                       ║
       ║  邮箱: [admin@example.com________]    ║
       ║  validation: 必填，有效邮箱格式        ║
       ║                                       ║
       ║  角色: [▼ Admin]                      ║
       ║                                       ║
       ║  所属组织: [▼ 测试部门]               ║
       ║                                       ║
       ║  所属项目:                            ║
       ║  [▼ 项目A]  [+添加项目]               ║
       ║                                       ║
       ║  状态:                                ║
       ║  (•) 启用   ( ) 禁用                  ║
       ║                                       ║
       ║  [ ] 重置密码并发送邮件通知            ║
       ║                                       ║
       ║  [   保存   ]      [   取消   ]       ║
       ╚═══════════════════════════════════════╝
```

**说明**: 编辑用户基本信息、角色分配、组织归属和账号状态。

### 子功能 2: 角色权限配置详情页

```
╔═══════════════════════════════════════════════╗
║  角色权限配置: Test Engineer                  ║
╠═══════════════════════════════════════════════╣
║                                               ║
║  角色名称: [Test Engineer_____________]       ║
║  描述: [具有测试执行和管理权限的工程师]       ║
║                                               ║
║  权限清单:                                    ║
║                                               ║
║  仪表盘模块:                                  ║
║  [✓] VIEW_DASHBOARD      - 查看仪表盘         ║
║                                               ║
║  测试用例模块:                                ║
║  [✓] VIEW_CASES          - 查看测试用例       ║
║  [✓] EDIT_CASES          - 编辑测试用例       ║
║  [✓] EXECUTE_TESTS       - 执行测试           ║
║  [ ] DELETE_CASES        - 删除测试用例       ║
║                                               ║
║  自动化模块:                                  ║
║  [✓] VIEW_AUTOMATION     - 查看自动化脚本     ║
║  [✓] EDIT_AUTOMATION     - 编辑自动化脚本     ║
║  [ ] DELETE_AUTOMATION   - 删除自动化脚本     ║
║                                               ║
║  管理功能:                                    ║
║  [ ] MANAGE_USERS        - 用户管理           ║
║  [ ] MANAGE_ROLES        - 角色管理           ║
║  [ ] MANAGE_DATABASE     - 数据库管理         ║
║  [ ] MANAGE_CONFIG       - 系统配置           ║
║                                               ║
║  [全选] [取消全选]                            ║
║                                               ║
║  [保存权限]  [重置]  [取消]                   ║
╚═══════════════════════════════════════════════╝
```

**说明**: 详细配置角色的各项权限，支持模块化权限管理和批量操作。

### 子功能 3: 组织树形管理

```
╔═══════════════════════════════════════════════╗
║  组织结构管理                    [+新建组织] ║
╠═══════════════════════════════════════════════╣
║                                               ║
║  📁 总公司                                    ║
║    ├─ 📁 研发中心              [编辑] [删除] ║
║    │   ├─ 📁 前端团队          [编辑] [删除] ║
║    │   │   └─ 👤 5 个成员                    ║
║    │   ├─ 📁 后端团队          [编辑] [删除] ║
║    │   │   └─ 👤 8 个成员                    ║
║    │   └─ 📁 测试团队          [编辑] [删除] ║
║    │       └─ 👤 6 个成员                    ║
║    ├─ 📁 产品部门              [编辑] [删除] ║
║    │   └─ 👤 3 个成员                        ║
║    └─ 📁 运营部门              [编辑] [删除] ║
║        └─ 👤 4 个成员                        ║
║                                               ║
║  选中组织: 测试团队                           ║
║  成员列表:                                    ║
║  - admin (Admin)                              ║
║  - tester1 (Test Engineer)                    ║
║  - tester2 (Test Engineer)                    ║
║  ...                                          ║
║                                               ║
║  [添加成员]  [批量导入]                       ║
╚═══════════════════════════════════════════════╝
```

**说明**: 树形展示组织结构，支持拖拽调整层级、成员分配和批量操作。

### 子功能 4: 项目管理页面

```
╔═══════════════════════════════════════════════╗
║  项目管理                        [+新建项目] ║
╠═══════════════════════════════════════════════╣
║                                               ║
║  ┌─────────────────────────────────────────┐ ║
║  │ 项目A                              [•••] │ ║
║  │ 所属组织: 测试团队                       │ ║
║  │ 成员: 8 人 | 测试用例: 45 个             │ ║
║  │ 创建时间: 2024-10-01                     │ ║
║  │ [查看] [编辑] [归档]                     │ ║
║  └─────────────────────────────────────────┘ ║
║                                               ║
║  ┌─────────────────────────────────────────┐ ║
║  │ 项目B                              [•••] │ ║
║  │ 所属组织: 前端团队                       │ ║
║  │ 成员: 5 人 | 测试用例: 28 个             │ ║
║  │ 创建时间: 2024-09-15                     │ ║
║  │ [查看] [编辑] [归档]                     │ ║
║  └─────────────────────────────────────────┘ ║
║                                               ║
║  ┌─────────────────────────────────────────┐ ║
║  │ 项目C                              [•••] │ ║
║  │ 所属组织: 后端团队                       │ ║
║  │ 成员: 12 人 | 测试用例: 89 个            │ ║
║  │ 创建时间: 2024-08-20                     │ ║
║  │ [查看] [编辑] [归档]                     │ ║
║  └─────────────────────────────────────────┘ ║
╚═══════════════════════════════════════════════╝
```

**说明**: 管理所有项目，查看项目统计、成员分配、测试用例数量等信息。

---

*此线框图由 ui-wireframe-generator skill 自动生成*
