# 1.2.12 设计示意图 - YAML 编辑器

## 功能描述

专用 YAML 配置文件编辑器，支持语法高亮、格式验证、自动补全。主要用于编辑工作流定义、测试配置等 YAML 文件。

## 页面结构

```
╔═══════════════════════════════════════════════════════════════════╗
║  YAML 编辑器                              [验证] [格式化] [保存]  ║
╠═══════════════════════════════════════════════════════════════════╣
║                                                                   ║
║  文件: [▼ workflow-config.yaml]                                  ║
║                                                                   ║
║  ┌─────────────────────────────────────────────────────────────┐ ║
║  │ 1  workflow:                                                │ ║
║  │ 2    name: "User Authentication Workflow"                   │ ║
║  │ 3    version: "1.0"                                         │ ║
║  │ 4    steps:                                                 │ ║
║  │ 5      - id: login                                          │ ║
║  │ 6        type: http                                         │ ║
║  │ 7        config:                                            │ ║
║  │ 8          url: "{{API_BASE}}/auth/login"                   │ ║
║  │ 9          method: POST                                     │ ║
║  │10          headers:                                         │ ║
║  │11            Content-Type: application/json                 │ ║
║  │12          body:                                            │ ║
║  │13            username: "{{USERNAME}}"                       │ ║
║  │14            password: "{{PASSWORD}}"                       │ ║
║  │15        retry: 3                                           │ ║
║  │16        timeout: 5000                                      │ ║
║  │17                                                           │ ║
║  │18      - id: verify                                         │ ║
║  │19        type: test-case                                    │ ║
║  │20        depends_on:                                        │ ║
║  │21          - login                                          │ ║
║  └─────────────────────────────────────────────────────────────┘ ║
║                                                                   ║
║  ✓ 语法验证通过 │ 行: 21 │ 列: 15                                ║
╚═══════════════════════════════════════════════════════════════════╝
```

## 交互流程

- 选择文件 → 加载 YAML 内容到编辑器
- 编辑内容 → 实时语法高亮
- 点击"验证" → 检查 YAML 语法
- 点击"格式化" → 自动格式化 YAML
- 点击"保存" → 保存文件
- 语法错误 → 显示错误行号和提示

## 数据字段

| 字段名 | 类型 | 校验规则 | 说明 |
|--------|------|----------|------|
| filename | string | 必填，.yaml/.yml 结尾 | 文件名 |
| content | string | 必填，有效 YAML | 文件内容 |

## 权限说明

- 访问权限：已登录用户
- 权限要求：EDIT_AUTOMATION 权限（编辑工作流配置）

## 后端 API 依赖

- `GET /api/yaml/:filename` - 获取 YAML 文件内容
- `PUT /api/yaml/:filename` - 保存 YAML 文件
- `POST /api/yaml/validate` - 验证 YAML 语法

## 实现建议

- 使用 Monaco Editor 或 CodeMirror
- 配置 YAML 语法高亮和验证
- 使用 js-yaml 库解析和验证 YAML
- 实现自动补全（基于 schema）
- 添加折叠/展开功能
- 支持多文件标签页
- 实现撤销/重做功能

## 测试要点

- [ ] 文件加载正确
- [ ] 语法高亮正常
- [ ] 验证功能准确识别语法错误
- [ ] 格式化功能正常
- [ ] 保存文件成功
- [ ] 错误提示清晰
- [ ] 行号显示正确

---

*此线框图由 ui-wireframe-generator skill 自动生成*
