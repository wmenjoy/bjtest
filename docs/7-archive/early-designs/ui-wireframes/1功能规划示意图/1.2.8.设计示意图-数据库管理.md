# 1.2.8 设计示意图 - 数据库管理

## 功能描述

数据库管理界面，支持查看数据库表结构、执行 SQL 查询、数据导入导出、备份恢复等功能。

## 页面结构

```
╔═══════════════════════════════════════════════════════════════════╗
║  数据库管理                                  [备份] [恢复]        ║
╠═════════════╦═════════════════════════════════════════════════════╣
║             ║                                                     ║
║  表列表      ║  SQL 编辑器                                        ║
║             ║                                                     ║
║  📊 users   ║  SELECT * FROM users                               ║
║  📊 tests   ║  WHERE created_at > '2024-01-01'                   ║
║  📊 runs    ║  LIMIT 100;                                        ║
║  📊 scripts ║                                                     ║
║             ║  [执行] [清空]                                      ║
║             ║                                                     ║
║             ║  ┌──────────────────────────────────────────────┐  ║
║             ║  │ id  │ username │ email      │ created_at    │  ║
║             ║  ├──────────────────────────────────────────────┤  ║
║             ║  │ 1   │ admin    │ admin@...  │ 2024-11-01    │  ║
║             ║  │ 2   │ user1    │ user1@...  │ 2024-11-15    │  ║
║             ║  └──────────────────────────────────────────────┘  ║
║             ║                                                     ║
║             ║  [导出 CSV]                                        ║
╚═════════════╩═════════════════════════════════════════════════════╝
```

## 交互流程

- 选择表 → 显示表结构和数据预览
- 编写 SQL → 点击"执行" → 显示查询结果
- 点击"导出" → 下载 CSV 文件
- 点击"备份" → 创建数据库备份
- 点击"恢复" → 上传备份文件恢复

## 权限说明

- 访问权限：管理员
- 权限要求：MANAGE_DATABASE 权限

## 后端 API 依赖

- `GET /api/database/tables` - 获取表列表
- `POST /api/database/query` - 执行 SQL 查询
- `POST /api/database/backup` - 创建备份
- `POST /api/database/restore` - 恢复备份

## 实现建议

- SQL 编辑器使用 Monaco Editor
- 实现 SQL 语法高亮
- 查询结果支持分页
- 备份文件加密存储

## 测试要点

- [ ] 表列表正确显示
- [ ] SQL 查询执行正常
- [ ] 查询结果正确显示
- [ ] 导出功能正常
- [ ] 备份恢复功能正常

### 子功能 1: 表结构查看

```
╔═══════════════════════════════════════════════╗
║  表结构: users                          [×]   ║
╠═══════════════════════════════════════════════╣
║                                               ║
║  ┌─────────────────────────────────────────┐ ║
║  │ 列名     │ 类型    │ 约束        │ 说明│ ║
║  ├─────────────────────────────────────────┤ ║
║  │ id       │ INTEGER │ PRIMARY KEY │ ID  │ ║
║  │ username │ VARCHAR │ NOT NULL    │用户名│ ║
║  │ email    │ VARCHAR │ NOT NULL    │邮箱 │ ║
║  │ role_id  │ INTEGER │ FOREIGN KEY │角色 │ ║
║  │ created  │ DATETIME│ NOT NULL    │创建 │ ║
║  └─────────────────────────────────────────┘ ║
║                                               ║
║  索引:                                        ║
║  - idx_username (username)                    ║
║  - idx_email (email)                          ║
║                                               ║
║  [导出DDL]  [关闭]                            ║
╚═══════════════════════════════════════════════╝
```

---

*此线框图由 ui-wireframe-generator skill 自动生成*
