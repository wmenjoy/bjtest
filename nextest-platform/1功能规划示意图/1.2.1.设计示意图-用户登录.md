# 1.2.1 设计示意图 - 用户登录

## 功能描述

用户通过用户名/密码登录测试平台，验证成功后进入系统。支持基于角色的权限控制，不同角色登录后看到不同的功能菜单。

## 页面结构

```
╔═══════════════════════════════════════════════════════╗
║                                                       ║
║              测试平台 Logo                             ║
║          NextTest Platform                            ║
║                                                       ║
╠═══════════════════════════════════════════════════════╣
║                                                       ║
║    ┌──────────────────────────────────────────┐      ║
║    │                                          │      ║
║    │         用户登录                          │      ║
║    │                                          │      ║
║    │                                          │      ║
║    │  用户名: [_________________________]     │      ║
║    │  validation: 必填，4-20字符               │      ║
║    │                                          │      ║
║    │  密码:   [_________________________]     │      ║
║    │  validation: 必填，6-20字符               │      ║
║    │                                          │      ║
║    │                                          │      ║
║    │         [      登录      ]               │      ║
║    │                                          │      ║
║    │                                          │      ║
║    └──────────────────────────────────────────┘      ║
║                                                       ║
╚═══════════════════════════════════════════════════════╝
```

## 交互流程

- 用户输入用户名和密码 → 点击"登录"按钮
- 验证成功 → 根据用户角色跳转到 [1.2.2 仪表盘]
- 验证失败 → 显示错误提示信息
- 首次访问 → 自动显示登录页
- 已登录用户 → 自动跳转到仪表盘

## 数据字段

| 字段名 | 类型 | 校验规则 | 说明 |
|--------|------|----------|------|
| username | string | 必填，4-20字符 | 用户名 |
| password | string | 必填，6-20字符 | 密码 |

## 权限说明

- 访问权限：匿名用户
- 登录成功后根据用户角色分配权限：
  - Admin: 完整系统访问权限
  - Test Engineer: 测试用例管理和执行权限
  - Viewer: 只读查看权限

## 后端 API 依赖

- `POST /api/auth/login` - 用户登录验证，返回 JWT token 和用户信息

## 实现建议

- 使用 React Hook Form 进行表单验证
- 密码字段使用 type="password" 隐藏输入
- 使用 JWT token 进行后续 API 认证
- 登录失败显示友好的错误提示
- 考虑添加"记住我"功能（可选）
- 实现登录失败次数限制（防止暴力破解）

## 测试要点

- [ ] 正确用户名密码登录成功
- [ ] 错误密码显示错误提示
- [ ] 空字段验证提示
- [ ] 用户名/密码格式校验
- [ ] 不同角色用户登录后权限正确
- [ ] Token 存储和自动登录功能
- [ ] 登录态过期后自动跳转到登录页

### 子功能 1: 忘记密码对话框

```
       ╔═══════════════════════════════════════╗
       ║  忘记密码                      [×]    ║
       ╠═══════════════════════════════════════╣
       ║                                       ║
       ║  请输入你的注册邮箱地址，我们将发送   ║
       ║  密码重置链接到你的邮箱。             ║
       ║                                       ║
       ║  邮箱地址:                            ║
       ║  [_______________________________]    ║
       ║  validation: 必填，有效邮箱格式        ║
       ║                                       ║
       ║  [   发送重置链接   ]  [   取消   ]   ║
       ║                                       ║
       ║  ✓ 重置链接已发送，请查收邮件         ║
       ╚═══════════════════════════════════════╝
```

**说明**: 通过邮箱发送密码重置链接，实现防重复发送（60秒冷却）。

### 子功能 2: 重置密码页面

用户点击邮件中的链接访问此页面：

```
╔═══════════════════════════════════════════════╗
║          重置密码                              ║
╠═══════════════════════════════════════════════╣
║                                               ║
║    ┌──────────────────────────────────────┐  ║
║    │  新密码:                             │  ║
║    │  [____________________________]      │  ║
║    │  validation: 必填，6-20字符，        │  ║
║    │               含字母和数字            │  ║
║    │                                      │  ║
║    │  确认密码:                           │  ║
║    │  [____________________________]      │  ║
║    │  validation: 必填，与新密码一致       │  ║
║    │                                      │  ║
║    │  密码强度: [████░░] 中等             │  ║
║    │                                      │  ║
║    │  [     确认重置     ]                │  ║
║    └──────────────────────────────────────┘  ║
╚═══════════════════════════════════════════════╝
```

**说明**: 验证 token 有效性（24小时），实时显示密码强度，重置成功后跳转登录页。

---

*此线框图由 ui-wireframe-generator skill 自动生成*
