# TestStep é«˜çº§æ§åˆ¶æµè®¾è®¡

## æ§åˆ¶æµç±»å‹

### 1. å¾ªç¯ (Loop)

#### æ•°æ®æ¨¡å‹

```typescript
interface TestStep {
  id: string;
  type: 'http' | 'command' | 'assert' | 'branch';
  name: string;
  config: any;

  // ===== å¾ªç¯æ§åˆ¶ =====
  loop?: {
    type: 'forEach' | 'while' | 'count';

    // forEach: éå†æ•°ç»„
    source?: string;           // "{{userList}}" æ•°ç»„æ¥æº
    itemVar?: string;          // "item" å½“å‰é¡¹å˜é‡å
    indexVar?: string;         // "i" ç´¢å¼•å˜é‡å

    // while: æ¡ä»¶å¾ªç¯
    condition?: string;        // "{{hasMore}} == true"

    // count: å›ºå®šæ¬¡æ•°
    count?: number | string;   // 5 æˆ– "{{retryCount}}"

    // é€šç”¨
    maxIterations?: number;    // å®‰å…¨é™åˆ¶ï¼Œé»˜è®¤100
  };

  // ===== æ¡ä»¶æ§åˆ¶ =====
  condition?: string;          // "{{status}} == 200" åªæœ‰æ»¡è¶³æ‰æ‰§è¡Œ

  // ===== å­æ­¥éª¤ï¼ˆç”¨äºåˆ†æ”¯å’Œå¾ªç¯ä½“å†…å¤šæ­¥éª¤ï¼‰=====
  children?: TestStep[];
}
```

#### å¾ªç¯ç¤ºä¾‹

```typescript
// ForEach å¾ªç¯
{
  id: "step-loop-users",
  type: "http",
  name: "è·å–æ¯ä¸ªç”¨æˆ·è¯¦æƒ…",
  loop: {
    type: "forEach",
    source: "{{userIds}}",      // [1, 2, 3]
    itemVar: "userId",          // å½“å‰ userId
    indexVar: "i"               // ç´¢å¼• 0, 1, 2
  },
  config: {
    method: "GET",
    url: "/api/users/{{userId}}"
  },
  outputs: {
    "response.body": "users[{{i}}]"   // å­˜åˆ°æ•°ç»„
  }
}
```

### 2. æ¡ä»¶åˆ†æ”¯ (Branch)

#### æ•°æ®æ¨¡å‹

```typescript
// æ–¹å¼1: ç®€å•æ¡ä»¶ - Step çº§åˆ«
{
  id: "step-1",
  type: "http",
  condition: "{{loginSuccess}} == true",  // æ¡ä»¶æ»¡è¶³æ‰æ‰§è¡Œ
  ...
}

// æ–¹å¼2: å¤šåˆ†æ”¯ - Branch ç±»å‹
{
  id: "step-branch",
  type: "branch",
  name: "æ£€æŸ¥ç™»å½•ç»“æœ",
  branches: [
    {
      condition: "{{status}} == 200",
      label: "ç™»å½•æˆåŠŸ",
      children: [
        { id: "s1", type: "http", name: "è·å–ç”¨æˆ·ä¿¡æ¯", ... },
        { id: "s2", type: "assert", name: "éªŒè¯æƒé™", ... }
      ]
    },
    {
      condition: "{{status}} == 401",
      label: "è®¤è¯å¤±è´¥",
      children: [
        { id: "s3", type: "http", name: "åˆ·æ–°Token", ... },
        { id: "s4", type: "http", name: "é‡è¯•ç™»å½•", ... }
      ]
    },
    {
      condition: "default",
      label: "å…¶ä»–é”™è¯¯",
      children: [
        { id: "s5", type: "assert", name: "æ ‡è®°å¤±è´¥", ... }
      ]
    }
  ]
}
```

### 3. Loop + å¤š Step ç»„åˆ

```typescript
{
  id: "step-batch-process",
  type: "group",                    // ç»„ç±»å‹ï¼ŒåŒ…å«å¤šä¸ªå­æ­¥éª¤
  name: "æ‰¹é‡å¤„ç†è®¢å•",
  loop: {
    type: "forEach",
    source: "{{orders}}",
    itemVar: "order"
  },
  children: [
    {
      id: "s1",
      type: "http",
      name: "éªŒè¯åº“å­˜",
      config: { url: "/api/stock/{{order.productId}}" }
    },
    {
      id: "s2",
      type: "branch",
      name: "åº“å­˜æ£€æŸ¥",
      branches: [
        {
          condition: "{{stockCount}} > 0",
          children: [
            { id: "s2-1", type: "http", name: "åˆ›å»ºå‘è´§å•", ... }
          ]
        },
        {
          condition: "default",
          children: [
            { id: "s2-2", type: "http", name: "æ ‡è®°ç¼ºè´§", ... }
          ]
        }
      ]
    },
    {
      id: "s3",
      type: "assert",
      name: "éªŒè¯å¤„ç†ç»“æœ",
      config: { target: "{{processResult}}", operator: "exists" }
    }
  ]
}
```

---

## UI å±•ç¤ºè®¾è®¡

### ç¼–è¾‘æ¨¡å¼ - æ ‘å½¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æµ‹è¯•æ­¥éª¤ç¼–è¾‘å™¨                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€ Step 1: ç™»å½• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç±»å‹: [HTTP â–¼]     æ–¹æ³•: [POST â–¼]                          â”‚ â”‚
â”‚  â”‚ URL: /api/login                                            â”‚ â”‚
â”‚  â”‚ è¾“å‡º: response.body.token â†’ token                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€ Step 2: è·å–ç”¨æˆ·åˆ—è¡¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç±»å‹: [HTTP â–¼]     æ–¹æ³•: [GET â–¼]                           â”‚ â”‚
â”‚  â”‚ URL: /api/users                                            â”‚ â”‚
â”‚  â”‚ è¾“å‡º: response.body.users â†’ userList                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€ Step 3: å¤„ç†æ¯ä¸ªç”¨æˆ· â”€â”€â”€â”€â”€â”€â”€â”€ [ğŸ”„ å¾ªç¯] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å¾ªç¯ç±»å‹: [ForEach â–¼]                                      â”‚ â”‚
â”‚  â”‚ æ•°æ®æº: [{{userList}}  ]  é¡¹å˜é‡: [user]  ç´¢å¼•: [i]        â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ â–¼ å¾ªç¯ä½“ (æ¯æ¬¡è¿­ä»£æ‰§è¡Œä»¥ä¸‹æ­¥éª¤)                        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”Œâ”€ 3.1: è·å–ç”¨æˆ·è¯¦æƒ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚ GET /api/users/{{user.id}}                       â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚ è¾“å‡º: response.body â†’ userDetail                 â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                         â”‚                             â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                         â–¼                             â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”Œâ”€ 3.2: æ¡ä»¶åˆ†æ”¯ â”€â”€â”€â”€â”€ [â—‡ åˆ†æ”¯] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚ æ¡ä»¶: {{userDetail.role}}                        â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚                                                  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚  â”œâ”€ == "admin" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚  â”‚  â”Œâ”€ 3.2.1: éªŒè¯ç®¡ç†å‘˜æƒé™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚  â”‚  â”‚ Assert: {{userDetail.permissions}}   â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚                                                  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚  â””â”€ else â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚     â”Œâ”€ 3.2.2: éªŒè¯æ™®é€šæƒé™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚     â”‚ Assert: {{userDetail.canRead}}       â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚  [+ æ·»åŠ å¾ªç¯å†…æ­¥éª¤]                                   â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€ Step 4: æœ€ç»ˆæ–­è¨€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç±»å‹: [Assert â–¼]                                           â”‚ â”‚
â”‚  â”‚ ç›®æ ‡: {{processedCount}}  æ“ä½œç¬¦: [>]  æœŸæœ›å€¼: [0]        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  [+ æ·»åŠ æ­¥éª¤]                                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰§è¡Œæ¨¡å¼ - å®æ—¶å±•å¼€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰§è¡Œè¿›åº¦                                     çŠ¶æ€: Running      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  âœ“ Step 1: ç™»å½•                                    0.3s         â”‚
â”‚    â””â”€ POST /api/login â†’ 200 OK                                  â”‚
â”‚    â””â”€ è¾“å‡º: token = "eyJhbG..."                                 â”‚
â”‚                                                                  â”‚
â”‚  âœ“ Step 2: è·å–ç”¨æˆ·åˆ—è¡¨                            0.2s         â”‚
â”‚    â””â”€ GET /api/users â†’ 200 OK                                   â”‚
â”‚    â””â”€ è¾“å‡º: userList = [{id:1}, {id:2}, {id:3}]                â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”„ Step 3: å¤„ç†æ¯ä¸ªç”¨æˆ· (å¾ªç¯ 3/3)                              â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€ è¿­ä»£ 1/3 (user.id=1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ“ å®Œæˆ       â”‚
â”‚    â”‚  â”œâ”€ 3.1: è·å–ç”¨æˆ·è¯¦æƒ… â†’ 200 OK                             â”‚
â”‚    â”‚  â””â”€ 3.2: åˆ†æ”¯ â†’ admin â†’ 3.2.1 éªŒè¯ç®¡ç†å‘˜æƒé™ âœ“             â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€ è¿­ä»£ 2/3 (user.id=2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ“ å®Œæˆ       â”‚
â”‚    â”‚  â”œâ”€ 3.1: è·å–ç”¨æˆ·è¯¦æƒ… â†’ 200 OK                             â”‚
â”‚    â”‚  â””â”€ 3.2: åˆ†æ”¯ â†’ else â†’ 3.2.2 éªŒè¯æ™®é€šæƒé™ âœ“                â”‚
â”‚    â”‚                                                            â”‚
â”‚    â””â”€ è¿­ä»£ 3/3 (user.id=3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”„ æ‰§è¡Œä¸­    â”‚
â”‚       â”œâ”€ 3.1: è·å–ç”¨æˆ·è¯¦æƒ… â†’ 200 OK âœ“                           â”‚
â”‚       â””â”€ 3.2: åˆ†æ”¯ â†’ åˆ¤æ–­ä¸­...                                  â”‚
â”‚                                                                  â”‚
â”‚  â³ Step 4: æœ€ç»ˆæ–­è¨€                               å¾…æ‰§è¡Œ        â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š å˜é‡æ±  (ç‚¹å‡»å±•å¼€)                                            â”‚
â”‚  â”œâ”€ token: "eyJhbG..."                                          â”‚
â”‚  â”œâ”€ userList: [{id:1}, {id:2}, {id:3}]                         â”‚
â”‚  â”œâ”€ user: {id: 3, name: "Charlie"}         â† å½“å‰è¿­ä»£é¡¹         â”‚
â”‚  â”œâ”€ i: 2                                    â† å½“å‰ç´¢å¼•          â”‚
â”‚  â””â”€ userDetail: {role: "user", canRead: true}                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå¯è§†åŒ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®æµè§†å›¾                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   [åˆå§‹å˜é‡]                                                     â”‚
â”‚   baseUrl â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚                                                         â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚        â”‚
â”‚   â”‚ Step 1: ç™»å½•          â”‚                            â”‚        â”‚
â”‚   â”‚ POST {{baseUrl}}/loginâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚          â”‚                                                      â”‚
â”‚          â”œâ”€â”€â”€ token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚          â”‚                                             â”‚        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚        â”‚
â”‚   â”‚ Step 2: è·å–ç”¨æˆ·åˆ—è¡¨  â”‚                           â”‚        â”‚
â”‚   â”‚ Auth: Bearer {{token}}â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚          â”‚                                                      â”‚
â”‚          â””â”€â”€â”€ userList â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                                           â”‚                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚ ğŸ”„ Step 3: å¾ªç¯ (forEach userList as user)                â”‚â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚   â”‚ â”‚  user (å½“å‰é¡¹)                                        â”‚ â”‚â”‚
â”‚   â”‚ â”‚    â”‚                                                  â”‚ â”‚â”‚
â”‚   â”‚ â”‚    â–¼                                                  â”‚ â”‚â”‚
â”‚   â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚ â”‚â”‚
â”‚   â”‚ â”‚  â”‚ 3.1: è·å–è¯¦æƒ…   â”‚                                  â”‚ â”‚â”‚
â”‚   â”‚ â”‚  â”‚ /users/{{user.id}}                                â”‚ â”‚â”‚
â”‚   â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”‚                                             â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â””â”€â”€ userDetail â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚â”‚
â”‚   â”‚ â”‚                                  â”‚                    â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”‚ â—‡ 3.2: åˆ†æ”¯ (userDetail.role)            â”‚ â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”‚                                          â”‚ â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”‚  â”Œâ”€ admin â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ else â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”‚  â”‚ 3.2.1 éªŒè¯    â”‚  â”‚ 3.2.2 éªŒè¯       â”‚â”‚ â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”‚  â”‚ ç®¡ç†å‘˜æƒé™    â”‚  â”‚ æ™®é€šæƒé™         â”‚â”‚ â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚ â”‚â”‚
â”‚   â”‚ â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                         â”‚                                       â”‚
â”‚                         â””â”€â”€ processedCount                     â”‚
â”‚                                   â”‚                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                             â”‚
â”‚   â”‚ Step 4: æœ€ç»ˆæ–­è¨€      â”‚â—„â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚   â”‚ {{processedCount}} > 0â”‚                                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ‰§è¡ŒçŠ¶æ€æ•°æ®ç»“æ„

### StepExecution (æ”¯æŒå¾ªç¯å’Œåˆ†æ”¯)

```typescript
interface StepExecution {
  stepId: string;
  stepName: string;
  status: 'pending' | 'running' | 'passed' | 'failed' | 'skipped';

  // æ—¶é—´
  startTime: string;
  endTime?: string;
  duration?: number;

  // è¾“å…¥è¾“å‡º
  inputs: Record<string, any>;
  outputs: Record<string, any>;

  // ===== å¾ªç¯æ‰§è¡Œè¯¦æƒ… =====
  loop?: {
    totalIterations: number;
    currentIteration: number;
    iterations: IterationExecution[];
  };

  // ===== åˆ†æ”¯æ‰§è¡Œè¯¦æƒ… =====
  branch?: {
    condition: string;
    evaluatedValue: any;
    selectedBranch: string;      // é€‰ä¸­çš„åˆ†æ”¯ ID
  };

  // ===== å­æ­¥éª¤æ‰§è¡Œ =====
  children?: StepExecution[];

  // é”™è¯¯ä¿¡æ¯
  error?: string;
}

interface IterationExecution {
  index: number;
  itemValue: any;                 // å½“å‰è¿­ä»£çš„æ•°æ®
  status: 'passed' | 'failed' | 'skipped';
  children: StepExecution[];      // è¯¥è¿­ä»£å†…çš„æ­¥éª¤æ‰§è¡Œ
  duration: number;
}
```

---

## WebSocket æ¨é€åè®®

```typescript
// å¾ªç¯å¼€å§‹
{
  type: "LOOP_START",
  stepId: "step-3",
  totalIterations: 3
}

// è¿­ä»£å¼€å§‹
{
  type: "ITERATION_START",
  stepId: "step-3",
  iteration: 1,
  itemValue: { id: 1, name: "Alice" }
}

// åˆ†æ”¯å†³ç­–
{
  type: "BRANCH_DECISION",
  stepId: "step-3.2",
  condition: "userDetail.role",
  evaluatedValue: "admin",
  selectedBranch: "branch-admin"
}

// æ­¥éª¤å®Œæˆ
{
  type: "STEP_COMPLETE",
  stepId: "step-3.2.1",
  status: "passed",
  outputs: { ... }
}

// è¿­ä»£å®Œæˆ
{
  type: "ITERATION_COMPLETE",
  stepId: "step-3",
  iteration: 1,
  status: "passed"
}

// å¾ªç¯å®Œæˆ
{
  type: "LOOP_COMPLETE",
  stepId: "step-3",
  totalIterations: 3,
  passedIterations: 3,
  failedIterations: 0
}
```

---

## å‰ç«¯ç»„ä»¶ç»“æ„

```
components/testcase/
â”œâ”€â”€ StepEditor/
â”‚   â”œâ”€â”€ StepEditor.tsx           # æ­¥éª¤ç¼–è¾‘å™¨å®¹å™¨
â”‚   â”œâ”€â”€ StepCard.tsx             # å•ä¸ªæ­¥éª¤å¡ç‰‡
â”‚   â”œâ”€â”€ LoopConfig.tsx           # å¾ªç¯é…ç½®é¢æ¿
â”‚   â”œâ”€â”€ BranchConfig.tsx         # åˆ†æ”¯é…ç½®é¢æ¿
â”‚   â”œâ”€â”€ ConditionEditor.tsx      # æ¡ä»¶è¡¨è¾¾å¼ç¼–è¾‘å™¨
â”‚   â””â”€â”€ ChildStepList.tsx        # å­æ­¥éª¤åˆ—è¡¨ï¼ˆå¾ªç¯ä½“/åˆ†æ”¯ä½“ï¼‰
â”‚
â”œâ”€â”€ StepExecution/
â”‚   â”œâ”€â”€ ExecutionView.tsx        # æ‰§è¡Œè§†å›¾å®¹å™¨
â”‚   â”œâ”€â”€ StepProgress.tsx         # æ­¥éª¤æ‰§è¡Œè¿›åº¦
â”‚   â”œâ”€â”€ LoopProgress.tsx         # å¾ªç¯è¿›åº¦å±•ç¤º
â”‚   â”œâ”€â”€ IterationCard.tsx        # å•æ¬¡è¿­ä»£å¡ç‰‡
â”‚   â”œâ”€â”€ BranchVisualization.tsx  # åˆ†æ”¯å¯è§†åŒ–
â”‚   â””â”€â”€ VariablePool.tsx         # å˜é‡æ± å±•ç¤º
â”‚
â”œâ”€â”€ DataFlow/
â”‚   â”œâ”€â”€ DataFlowDiagram.tsx      # æ•°æ®æµå›¾
â”‚   â”œâ”€â”€ VariableTracker.tsx      # å˜é‡è¿½è¸ª
â”‚   â””â”€â”€ ConnectionLine.tsx       # è¿æ¥çº¿ç»„ä»¶
```

---

## æ€»ç»“

| åŠŸèƒ½ | æ•°æ®æ¨¡å‹ | UI å±•ç¤º | æ‰§è¡Œè¿½è¸ª |
|------|---------|--------|---------|
| å¾ªç¯ | `step.loop` | å¯æŠ˜å å¾ªç¯ä½“ç¼–è¾‘ | æ¯æ¬¡è¿­ä»£å±•å¼€æ˜¾ç¤º |
| åˆ†æ”¯ | `step.branches` | å¹¶æ’åˆ†æ”¯æ˜¾ç¤º | é«˜äº®æ‰§è¡Œè·¯å¾„ |
| åµŒå¥— | `step.children` | ç¼©è¿›å±‚çº§å±•ç¤º | é€’å½’å±•å¼€æ‰§è¡Œ |
| æ•°æ®æµ | `inputs/outputs` | è¿çº¿å¯è§†åŒ– | å®æ—¶å˜é‡æ± æ›´æ–° |
